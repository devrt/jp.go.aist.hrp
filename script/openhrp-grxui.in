#!/bin/sh

##
# GrxUI usage:
#
#   ./GrxUI.sh "" "" "" on
#   ./GrxUI.sh project/HRP2 OpenHRP3 script/test.py off
##
DEFAULT_PROJECT=$1
DEFAULT_MODE=$2
SCRIPT=$3
DEBUG=$4

export OPENHRPHOME=@OPENHRPHOME@

JAVAVM=@GRXUI_JAVAVM@
JYTHON_HOME=@GRXUI_JYTHON_HOME@

ADDITIONAL_PATH=@GRXUI_ADDITIONAL_PATH@

if [ ${ADDITIONAL_PATH} ] ; then
    export PATH=${ADDITIONAL_PATH}:$PATH
fi

ADDITIONAL_LD_LIBRARY_PATH=@GRXUI_LD_LIBRARY_PATH@

if [ ${ADDITIONAL_LD_LIBRARY_PATH} ] ; then
    if [ ${LD_LIBRARY_PATH} ] ; then
	export LD_LIBRARY_PATH=${ADDITIONAL_LD_LIBRARY_PATH}:${LD_LIBRARY_PATH}
    else
	export LD_LIBRARY_PATH=${ADDITIONAL_LD_LIBRARY_PATH}
    fi
fi

export CLASSPATH=@GRXUI_CLASSPATH@:${CLASSPATH}

NS_OPT="-ORBInitRef NameService=corbaloc:iiop:@NS_HOST@:@NS_PORT@/NameService"

GRXUI_HOME=@GRXUI_HOME@


## 
# for client/gui/grxuirc.xml
##
BIN_DIR=${OPENHRPHOME}/bin/unix
BIN_SFX=.sh
PROJECT_DIR=%OPENHRPHOME%/@RELATIVE_SAMPLE_INSTALL_PATH@/project
cd ${GRXUI_HOME}

${JAVAVM} -server -Xmx512m \
	-DPROJECT="${DEFAULT_PROJECT}" \
	-DMODE="${DEFAULT_MODE}" \
	-DSCRIPT="{$SCRIPT}" \
	-DDEBUG=${DEBUG} \
	-DNS_OPT="${NS_OPT}" \
	-DOPENHRPHOME=${OPENHRPHOME} \
	-DBIN_DIR=${BIN_DIR} \
	-DBIN_SFX=${BIN_SFX} \
	-Dpython.home=${JYTHON_HOME} \
	-Dpython.cachedir=$HOME/.jython-cache \
	com.generalrobotix.ui.GrxUI

##
# NOTE:
#   to startup GrxUI from eclipse 
#   set argument -D??? : OPENHRPHOME , BIN_DIR , BIN_SFX
##
