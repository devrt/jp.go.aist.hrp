@echo off
rem ---
rem GrxUI usage:
rem   ./GrxUI.sh "" "" "" on
rem   ./GrxUI.sh project/HRP2 OpenHRP3 script/test.py off
rem ---
@echo on

set DEFAULT_PROJECT=%1
set DEFAULT_MODE=%2
set SCRIPT=%3
set DEBUG=%4
echo %DEFAULT_PROJECT%

set OPENHRPHOME=@OPENHRPHOME@
set JAVAVM=@GRXUI_JAVAVM@
set NAMESERV="@OMNINAMES@" -start @NS_PORT@ -logdir "%TEMP%"
del "%TEMP%"\omninames-*.*

set ADDITIONAL_PATH=@GRXUI_ADDITIONAL_PATH@
if not "%ADDITIONAL_PATH%"=="" set PATH=%ADDITIONAL_PATH%;%PATH%

set ADDITIONAL_LD_LIBRARY_PATH=@GRXUI_LD_LIBRARY_PATH@
if not "%ADDITIONAL_LD_LIBRARY_PATH%"=="" set PATH=%ADDITIONAL_LD_LIBRARY_PATH%;%PATH%

set CLASSPATH=@GRXUI_CLASSPATH@;%CLASSPATH%

rem set CLASSPATH=%OPENHRPHOME%\client\gui\grxui.jar;%OPENHRPHOME%\Common\corba\openhrpstubskel.jar;%OPENHRPHOME%\ModelLoader\server\vrml97\vrml97.jar;%JYTHON_DIR%\jython.jar;.;%HRP_STUB_PATH%

set NS_OPT="-ORBInitRef NameService=corbaloc:iiop:@NS_HOST@:@NS_PORT@/NameService"
set GRXUI_HOME=@GRXUI_HOME@

@echo off
rem --- 
rem  for client\gui\grxuirc.xml
rem ---
@echo on

set BIN_DIR=%OPENHRPHOME%\bin\dos
set BIN_SFX=.bat
set PROJECT_DIR=%OPENHRPHOME%\@RELATIVE_SAMPLE_INSTALL_PATH@\project
cd "%GRXUI_HOME%"

@echo off
rem ---
rem  Please don`t delete the character '/', following %OPENHRPHOME% and %BIN_DIR%
rem ---
@echo on

"%JAVAVM%" -Dj3d.rend=d3d -Xmx512m ^
    -DPROJECT=%DEFAULT_PROJECT% ^
    -DMODE=%DEFAULT_MODE% ^
    -DSCRIPT=%SCRIPT% ^
    -DDEBUG=%DEBUG% ^
    -DNS_OPT=%NS_OPT% ^
    -DOPENHRPHOME="%OPENHRPHOME%/" ^
    -DBIN_DIR="%BIN_DIR%/" ^
    -DBIN_SFX=%BIN_SFX% ^
    com.generalrobotix.ui.GrxUI

del "%GRXUI_HOME%\script\rbimporter$py.class"

@echo off
rem ---
rem NOTE:
rem   to startup GrxUI from eclipse 
rem   set argument -D??? : OPENHRPHOME , BIN_DIR , BIN_SFX
rem ---
@echo on
